# ミラーゲームプロジェクトの作成

現在のゲームバージョンに適した*ミラーゲームプロジェクト*がコミュニティ内にある場合は、それを直接使用すればよく、新たに*ミラーゲームプロジェクト*を作成する必要はありません。

この章を学ぶ前に、*ブループリントMod*の開発プロセスを理解し、*ブループリントMod*の開発過程で、ゲーム内のさまざまな種類のコードやリソースに対して*Dummy*を作成する方法を理解しておく必要があります。また、ある程度の*C++*開発およびデバッグ経験が求められます。

ゲームリソースやコードに大きく依存するModの場合、手動でさまざまなリソースの*Dummy*を作成するのは困難です。ゲームリソースをより良く理解し、活用するためには、いくつかのツールを使用して、大部分の仮想コードやリソースを含む*ミラーゲームプロジェクト*を自動的に作成することができます。

これは多くの知識を必要とし、操作もかなり複雑ですが、*ミラーゲームプロジェクト*が成功裏に作成されれば、Modコミュニティ全体で長期間使用することができ、次の大きなバージョン更新まで活用できます。

*ミラーゲームプロジェクト*の作成には間隔が長いため、このガイドは私自身の研究ノートとして書かれています。また、もし私がこのコミュニティを離れたとき、誰かがこのガイドを参考にして、これらの研究を迅速に完了し、私の役割を引き継いでくれることを願っています。

## ステップ1：UHTのエクスポートとUHTを使ったプロジェクト作成

- *UE4SS* の `Dumpers` 内で、`Unreal Header Tool (UHT) Dumper`を使用して、ゲーム本体と使用されているプラグインの仮想コード（UHT）をエクスポートできます。この機能には設定変更は必要ありません。
- *FModel* を使用して、`RTypeFinal2\RTypeFinal2.uproject` と `RTypeFinal2\Plugins\RTypeFinal2.upluginmanifest` の2つのファイルを解凍します。
- [UE4GameProjectGenerator](https://github.com/Buckminsterfullerene02/UE4GameProjectGenerator) プロジェクトをダウンロードします。
- `UE4.26` で一度 *UE4GameProjectGenerator* を実行し、バージョンと生成するために必要なファイルを確認します。
- コマンドプロンプトを使用してプロジェクトファイルを生成します。コマンドは以下の通りです：

```
"(Unreal Engineのインストール場所)\UE_4.26\Engine\Binaries\Win64\UE4Editor-Cmd.exe" "(UE4GameProjectGeneratorの場所)\UE4GameProjectGenerator\GameProjectGenerator.uproject" -run=ProjectGenerator -HeaderRoot="(ゲームのインストール場所)\R-Type Final 2\RTypeFinal2\Binaries\Win64\UHTHeaderDump" -ProjectFile="(FModelのインストール場所)\FModel\Output\Exports\RTypeFinal2\RTypeFinal2.uproject" -PluginManifest="(FModelのインストール場所)\FModel\Output\Exports\RTypeFinal2\Plugins\RTypeFinal2.upluginmanifest" -OutputDir="(出力フォルダ)" -stdout -unattended -NoLogTimes
```

注意 `(出力フォルダ)` は事前に存在する必要があります。そうしないとプロジェクトが出力されません。

## ステップ2：プロジェクトファイルの転送

[UE4GameProjectGenerator](https://github.com/Buckminsterfullerene02/UE4GameProjectGenerator) の方法でゲームプロジェクトを直接実行すると、コンパイルエラーが発生しますが、プロジェクト内に `.sln` ファイルが生成されていません。そのため、特別な方法でこの問題を解決する必要があります。

- ブループリントModを作成する際と同様に、新しい名前の `RTypeFinal2` という *C++* プロジェクトを作成します。
- 以前生成したプロジェクトファイルで新しいプロジェクトファイルを上書きします。この時点では、まだコンパイルできず、Unreal Engineを開けません。
- 次の作業が多いため、gitを使用してプロジェクトにリポジトリを作成し、バックアップや復元ができるようにしておくことをお勧めします。

