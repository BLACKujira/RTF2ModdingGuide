# メインリソースファイルのアンパック

## ディスクの内容を抽出する

ゲームディスクを持っていて、パソコンにCD/DVDドライブがまだ搭載されている場合、ディスクから直接ファイルをローカルにコピーできます。

CDドライブがない場合は、ゲームのディスクイメージファイル（.ISOなど）を使用し、以下の方法で内容を抽出できます：

- オペレーティングシステムの標準機能でディスクイメージをマウントする
- WinRARや7-Zipなどの圧縮ソフトを使用して内容を開いて抽出する
- 仮想ドライブツールを使用する

## 解凍スクリプトの実行

1. ディスクファイル構造内の以下のディレクトリに移動します：`PSP_GAME\USRDIR\CMN`
2. 次の2つのファイルを見つけて、それらの完全なパスを記録します：
   - CMN.DAT（約756MB）
   - CMN.FAT

3. Python環境を準備し、[Releases](https://github.com/BLACKujira/RTF2ModdingGuide/releases)から解凍スクリプトをダウンロードします。

4. `extract_rtt2_dat.py`スクリプトファイルを開き、最下部のメインプログラム部分に移動して、以下の変数を修正します：

```python
dat_dir = r"あなたのCMN.DATのパス"
fat_dir = r"あなたのCMN.FATのパス"
output_dir = r"ファイルを出力したいフォルダ"
```

実行に成功すると、出力ディレクトリに多数のサブフォルダと大文字で命名されたリソースファイルが生成されます。

リソースのパッキング方法やスクリプトの原理についての解析は、[リソースパッキング方法の分析](./リソースパック方式の分析.md)を参照してください。

## モデルの確認と変換

1. Noesisをダウンロードしてインストールします。
2. Noesisを使用して、スクリプトで生成された出力ディレクトリを開き、リソースファイルを閲覧します。
- .GIMファイル：通常、テクスチャファイルです。
- .GMOファイル：モデルファイル、アニメーションリソース、または不明なファイルタイプの可能性があります。
3. リソースを右クリック → `エクスポート`を選択し、リソースを一般的なフォーマット（例：.obj、.fbx、.png）に変換します。

注：*R-Type Tactics II* のモデルは *R-Type Final 2* よりかなり小さいため、*R-Type Final 2* にインポートする前に、3Dモデリングソフトでサイズ調整が必要な場合があります。
